<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- å¼•å…¥æ€æºå®‹ä½“ï¼Œä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿ -->
<link href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
<title>äº‘ç«¯ä¸´æ‘¹ Â· æ–‡æ˜å›å“</title>
<style>
  body {
    margin: 0;
    font-family: "Noto Serif SC", "å®‹ä½“", serif;
    background: linear-gradient(to bottom, #fdf6e3, #f5e8d0);
    color: #3e2723;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header {
    text-align: center;
    padding: 50px 20px 30px;
    background: rgba(255, 255, 255, 0.7);
  }
  header h1 {
    font-size: 34px;
    margin: 0 0 12px;
    color: #5d4037;
  }
  header p {
    font-size: 18px;
    color: #7d5a4e;
    margin: 0;
  }
  main {
    flex: 1;
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .upload-area {
    width: 100%;
    max-width: 600px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    padding: 40px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    text-align: center;
    margin-bottom: 40px;
  }
  .upload-box {
    border: 3px dashed #a1887f;
    border-radius: 16px;
    padding: 40px;
    cursor: pointer;
    transition: all 0.3s;
    background: #fffdf7;
  }
  .upload-box:hover {
    border-color: #8d6e63;
    background: #fffaf0;
  }
  .upload-box.dragover {
    border-color: #6d4c41;
    background: #fef9e7;
    transform: scale(1.02);
  }
  input[type="file"] {
    display: none;
  }
  .preview {
    max-width: 100%;
    max-height: 400px;
    margin: 20px 0;
    border-radius: 12px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
    display: none;
  }
  .result {
    width: 100%;
    max-width: 700px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    text-align: center;
    display: none;
  }
  .matched-poem {
    font-size: 22px;
    line-height: 2.2;
    margin: 20px 0;
    color: #4e342e;
    white-space: pre-line;
  }
  .poem-author {
    font-size: 18px;
    color: #8d6e63;
    margin: 10px 0;
  }
  button {
    margin: 20px 10px;
    padding: 14px 32px;
    font-size: 18px;
    background: #8d6e63;
    color: white;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s;
  }
  button:hover {
    background: #6d4c41;
    transform: translateY(-3px);
  }
  .reset-btn {
    background: #a1887f;
  }
  .reset-btn:hover {
    background: #8d6e63;
  }
  .tip {
    font-size: 15px;
    color: #a1887f;
    margin-top: 30px;
    line-height: 1.7;
  }
  .back-btn {
    margin-top: 40px;
    padding: 12px 30px;
    background: #a1887f;
    font-size: 16px;
    color: white;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
    display: block;
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
  }
  .back-btn:hover {
    background: #8d6e63;
    transform: translateY(-2px);
  }
  footer {
    text-align: center;
    padding: 40px;
    font-size: 14px;
    color: #8d6e63;
  }

  /* ç§»åŠ¨ç«¯é€‚é… */
  @media (max-width: 768px) {
    header {
      padding: 30px 15px 20px;
    }
    
    header h1 {
      font-size: 26px;
      margin-bottom: 8px;
    }
    
    header p {
      font-size: 15px;
      line-height: 1.4;
    }
    
    main {
      padding: 10px 15px;
    }
    
    .upload-area {
      max-width: 100%;
      padding: 25px 15px;
      margin-bottom: 25px;
      border-radius: 16px;
    }
    
    .upload-box {
      padding: 25px 15px;
      border-width: 2px;
    }
    
    .upload-box p:first-child {
      font-size: 18px;
      margin: 5px 0;
    }
    
    .preview {
      max-height: 280px;
      margin: 15px 0;
    }
    
    .result {
      max-width: 100%;
      padding: 20px 15px;
      border-radius: 16px;
    }
    
    .matched-poem {
      font-size: 19px;
      line-height: 1.9;
      margin: 15px 0;
    }
    
    .poem-author {
      font-size: 15px;
      margin: 8px 0;
    }
    
    button {
      margin: 10px 0;
      padding: 14px 24px;
      font-size: 17px;
      width: 100%;
      border-radius: 12px;
    }
    
    .tip {
      font-size: 13px;
      margin-top: 20px;
      line-height: 1.6;
      padding: 0 10px;
    }
    
    .back-btn {
      margin-top: 25px;
      padding: 12px 24px;
      font-size: 15px;
      width: 100%;
      box-sizing: border-box;
      text-align: center;
    }
    
    footer {
      padding: 30px 15px;
      font-size: 12px;
    }
  }
</style>
</head>
<body>

<header>
  <h1>âœ’ï¸ è¯—ç”»å…±åˆ›</h1>
  <p>ä¸Šä¼ ä½ çš„ä¹¦æ³•æˆ–ç»˜ç”»ä½œå“ï¼Œè®©åƒå¹´è¯—è¯ä¸ä½ çš„ç¬”å¢¨ç›¸é‡</p>
</header>

<main>
  <div class="upload-area">
    <div class="upload-box" id="uploadBox">
      <p style="font-size:20px; margin:10px 0;">ğŸ“œ ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ ä½œå“</p>
      <p style="color:#a1887f;">æ”¯æŒ JPGã€PNGã€WEBP æ ¼å¼ï¼Œå»ºè®®æ¸…æ™°æ‰‹å†™çœŸè¿¹</p>
      <input type="file" id="fileInput" accept="image/*" />
    </div>
    <img id="preview" class="preview" alt="ä½œå“é¢„è§ˆ" />
    <button onclick="document.getElementById('fileInput').click()" style="display:none;" id="reuploadBtn">
      ğŸ”„ é‡æ–°ä¸Šä¼ 
    </button>
  </div>

  <div class="result" id="resultBox">
    <h2>ä¸ºä½ åŒ¹é…çš„è¯—è¯</h2>
    <div class="matched-poem" id="poemText"></div>
    <p class="poem-author" id="poemAuthor"></p>
    <div>
      <button onclick="generateAgain()">ğŸ”€ å†è¯•ä¸€æ¬¡</button>
      <button class="reset-btn" onclick="resetAll()">ğŸ—‘ï¸ é‡æ–°å¼€å§‹</button>
    </div>
  </div>

  <p class="tip">
    æç¤ºï¼šAI ä¼šæ ¹æ®ä½ çš„ç¬”è¿¹é£æ ¼ã€æ„å›¾ã€æ„å¢ƒç­‰ç‰¹å¾ï¼Œ<br>
    ä»å”å®‹åç¯‡ä¸­æŒ‘é€‰æœ€å¥‘åˆçš„ä¸€é¦–è¯—è¯ã€‚<br>
    æ¯ä¸€æ¬¡ä¸Šä¼ ï¼Œéƒ½å¯èƒ½æœ‰ä¸åŒçš„å¿ƒæœ‰çµçŠ€ã€‚
  </p>
</main>

<button class="back-btn" onclick="location.href='age-gate.html'">
  è¿”å›é€‰æ‹©å…¥å£
</button>

<footer>
  æ–‡æ˜å›å“ Â· è®©ä½ çš„ç¬”å¢¨ï¼Œå”¤é†’å¤äººçš„å›å“
</footer>

<script>
// ç®€å•æ¨¡æ‹Ÿ AI åŒ¹é…è¯—è¯ï¼ˆçœŸå®é¡¹ç›®å¯æ¥å…¥è§†è§‰æ¨¡å‹ + Kimiï¼Œè¿™é‡Œç”¨é¢„è®¾åº“æ¨¡æ‹Ÿæ•ˆæœï¼‰
const poemDatabase = [
  { text: "ç«¹å¤–æ¡ƒèŠ±ä¸‰ä¸¤æï¼Œæ˜¥æ±Ÿæ°´æš–é¸­å…ˆçŸ¥ã€‚\nè’Œè’¿æ»¡åœ°èŠ¦èŠ½çŸ­ï¼Œæ­£æ˜¯æ²³è±šæ¬²ä¸Šæ—¶ã€‚", author: "è‹è½¼ Â· ã€Šæƒ å´‡æ˜¥æ±Ÿæ™šæ™¯ã€‹" },
  { text: "å›é¦–å‘æ¥è§ç‘Ÿå¤„ï¼Œå½’å»ï¼Œä¹Ÿæ— é£é›¨ä¹Ÿæ— æ™´ã€‚", author: "è‹è½¼ Â· ã€Šå®šé£æ³¢ã€‹" },
  { text: "å¤§æ±Ÿä¸œå»ï¼Œæµªæ·˜å°½ï¼Œåƒå¤é£æµäººç‰©ã€‚", author: "è‹è½¼ Â· ã€Šå¿µå¥´å¨‡Â·èµ¤å£æ€€å¤ã€‹" },
  { text: "æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚\nä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ã€‚", author: "è‹è½¼ Â· ã€Šæ°´è°ƒæ­Œå¤´ã€‹" },
  { text: "åºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚\nä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚", author: "æç™½ Â· ã€Šé™å¤œæ€ã€‹" },
  { text: "æµ·å†…å­˜çŸ¥å·±ï¼Œå¤©æ¶¯è‹¥æ¯”é‚»ã€‚", author: "ç‹å‹ƒ Â· ã€Šé€æœå°‘åºœä¹‹ä»»èœ€å·ã€‹" },
  { text: "é‡å¾„äº‘ä¿±é»‘ï¼Œæ±Ÿèˆ¹ç«ç‹¬æ˜ã€‚\næ™“çœ‹çº¢æ¹¿å¤„ï¼ŒèŠ±é‡é”¦å®˜åŸã€‚", author: "æœç”« Â· ã€Šæ˜¥å¤œå–œé›¨ã€‹" },
  { text: "åœè½¦åçˆ±æ«æ—æ™šï¼Œéœœå¶çº¢äºäºŒæœˆèŠ±ã€‚", author: "æœç”« Â· ã€Šå±±è¡Œã€‹" },
  { text: "ç‹¬åœ¨å¼‚ä¹¡ä¸ºå¼‚å®¢ï¼Œæ¯é€¢ä½³èŠ‚å€æ€äº²ã€‚\né¥çŸ¥å…„å¼Ÿç™»é«˜å¤„ï¼Œéæ’èŒ±è¸å°‘ä¸€äººã€‚", author: "ç‹ç»´ Â· ã€Šä¹æœˆä¹æ—¥å¿†å±±ä¸œå…„å¼Ÿã€‹" }
];

let currentImage = null;

const uploadBox = document.getElementById('uploadBox');
const fileInput = document.getElementById('fileInput');
const preview = document.getElementById('preview');
const resultBox = document.getElementById('resultBox');
const poemText = document.getElementById('poemText');
const poemAuthor = document.getElementById('poemAuthor');
const reuploadBtn = document.getElementById('reuploadBtn');

uploadBox.addEventListener('click', () => fileInput.click());

uploadBox.addEventListener('dragover', (e) => {
  e.preventDefault();
  uploadBox.classList.add('dragover');
});

uploadBox.addEventListener('dragleave', () => {
  uploadBox.classList.remove('dragover');
});

uploadBox.addEventListener('drop', (e) => {
  e.preventDefault();
  uploadBox.classList.remove('dragover');
  if (e.dataTransfer.files.length) {
    handleFile(e.dataTransfer.files[0]);
  }
});

fileInput.addEventListener('change', () => {
  if (fileInput.files.length) {
    handleFile(fileInput.files[0]);
  }
});

function handleFile(file) {
  if (!file.type.startsWith('image/')) {
    alert('è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶å“¦ï½');
    return;
  }

  const reader = new FileReader();
  reader.onload = (e) => {
    preview.src = e.target.result;
    preview.style.display = 'block';
    uploadBox.style.display = 'none';
    reuploadBtn.style.display = 'inline-block';
    currentImage = e.target.result;

    // æ¨¡æ‹Ÿ AI åˆ†æå¹¶åŒ¹é…è¯—è¯
    setTimeout(() => {
      matchPoem();
    }, 1500);
  };
  reader.readAsDataURL(file);
}

function matchPoem() {
  const randomPoem = poemDatabase[Math.floor(Math.random() * poemDatabase.length)];
  poemText.textContent = randomPoem.text;
  poemAuthor.textContent = randomPoem.author;
  resultBox.style.display = 'block';
  resultBox.scrollIntoView({ behavior: 'smooth' });
}

function generateAgain() {
  resultBox.style.opacity = '0.6';
  setTimeout(() => {
    matchPoem();
    resultBox.style.opacity = '1';
  }, 800);
}

function resetAll() {
  preview.src = '';
  preview.style.display = 'none';
  uploadBox.style.display = 'block';
  reuploadBtn.style.display = 'none';
  resultBox.style.display = 'none';
  fileInput.value = '';
}
</script>

</body>
</html>