<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    // åªæœ‰éç§»åŠ¨ç«¯æ‰åŠ è½½å¤–éƒ¨å­—ä½“
    if (!/Mobi|Android|iPhone/i.test(navigator.userAgent)) {
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = 'https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@400;700&display=swap';
      document.head.appendChild(link);
    }
  </script>
<title>è®°å¿†è¯—å»Š Â· æ–‡æ˜å›å“</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    touch-action: manipulation;
  }
  body {
    font-family: "Noto Serif SC", "å®‹ä½“", serif;
    background: linear-gradient(to bottom, #f5e8d8, #e8d9c8);
    color: #3e2723;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header {
    text-align: center;
    padding: 50px 20px 30px;
    background: rgba(255, 255, 255, 0.6);
  }
  header h1 {
    font-size: 34px;
    margin: 0 0 12px;
    color: #4e342e;
  }
  header p {
    font-size: 18px;
    color: #6d4c41;
    margin: 0;
  }
  main {
    flex: 1;
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
  }
  .intro {
    text-align: center;
    font-size: 18px;
    line-height: 1.9;
    margin-bottom: 40px;
    color: #5d4037;
  }
  .poem-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
  }
  .poem-card {
    background: rgba(255, 255, 255, 0.8);
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
    transition: all 0.3s;
    cursor: pointer;
  }
  .poem-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.15);
  }
  .poem-title {
    font-size: 22px;
    margin: 0 0 16px;
    color: #6d4c41;
    text-align: center;
  }
  .poem-author {
    text-align: center;
    font-size: 16px;
    color: #8d6e63;
    margin-bottom: 20px;
  }
  .poem-text {
    font-size: 18px;
    line-height: 2.2;
    white-space: pre-line;
    color: #4e342e;
  }
  .actions {
    text-align: center;
    margin: 50px 0;
  }
  .actions button {
    margin: 0 15px;
    padding: 14px 32px;
    font-size: 18px;
    background: #8d6e63;
    color: white;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  .actions button:hover {
    background: #6d4c41;
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  }
  .actions button:nth-child(2) {
    background: #a1887f;
  }
  .actions button:nth-child(2):hover {
    background: #8d6e63;
  }
  footer {
    text-align: center;
    padding: 40px;
    font-size: 14px;
    color: #8d6e63;
  }

  /* ç§»åŠ¨ç«¯é€‚é… */
  @media (max-width: 768px) {
    body {
      background: #f5e8d8; /* ç§»åŠ¨ç«¯ä½¿ç”¨çº¯è‰² */
      font-family: -apple-system, sans-serif;
    }
    
    header {
      padding: 30px 15px 20px;
      background: #fff;
    }
    
    header h1 {
      font-size: 26px;
      margin-bottom: 8px;
    }
    
    header p {
      font-size: 15px;
    }
    
    main {
      padding: 10px 15px;
    }
    
    .intro {
      font-size: 15px;
      line-height: 1.7;
      margin-bottom: 25px;
      padding: 0 10px;
    }
    
    .poem-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .poem-card {
      background: #fff;
      padding: 24px 20px;
      border-radius: 12px;
      box-shadow: none;
      border: 1px solid #ddd;
      transform: none !important;
      transition: none !important;
    }
    
    .poem-card:hover {
      transform: none !important;
      box-shadow: none !important;
    }
    
    .poem-title {
      font-size: 20px;
      margin-bottom: 10px;
    }
    
    .poem-author {
      font-size: 14px;
      margin-bottom: 14px;
    }
    
    .poem-text {
      font-size: 16px;
      line-height: 1.9;
      text-align: center;
    }
    
    .actions {
      margin: 30px 0;
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 0 10px;
    }
    
    .actions button {
      margin: 0;
      padding: 14px 24px;
      font-size: 16px;
      width: 100%;
      border-radius: 12px;
    }
    
    footer {
      padding: 30px 15px;
      font-size: 12px;
    }
  }
</style>
</head>
<body>

<header>
  <h1>ğŸ•¯ è®°å¿†è¯—å»Š</h1>
  <p>é‚£äº›å¹´ï¼Œæˆ‘ä»¬ä¸€èµ·èƒŒè¿‡çš„è¯—</p>
</header>

<main>
  <div class="intro">
    æ—¶å…‰æ…¢ä¸‹æ¥ï¼Œ<br>
    è®©ç†Ÿæ‚‰çš„è¯—å¥é‡æ–°åœ¨å¿ƒåº•å“èµ·ã€‚<br>
    è¿™é‡Œæ²¡æœ‰è€ƒè¯•ï¼Œåªæœ‰å›å¿†ä¸å®‰å®ã€‚
  </div>

  <div class="poem-grid">
    <div class="poem-card">
      <h2 class="poem-title">é™å¤œæ€</h2>
      <p class="poem-author">æç™½</p>
      <div class="poem-text">
åºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚
ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚</div>
    </div>

    <div class="poem-card">
      <h2 class="poem-title">æ˜¥æ™“</h2>
      <p class="poem-author">å­Ÿæµ©ç„¶</p>
      <div class="poem-text">
æ˜¥çœ ä¸è§‰æ™“ï¼Œå¤„å¤„é—»å•¼é¸Ÿã€‚
å¤œæ¥é£é›¨å£°ï¼ŒèŠ±è½çŸ¥å¤šå°‘ã€‚</div>
    </div>

    <div class="poem-card">
      <h2 class="poem-title">ç™»é¹³é›€æ¥¼</h2>
      <p class="poem-author">ç‹ä¹‹æ¶£</p>
      <div class="poem-text">
ç™½æ—¥ä¾å±±å°½ï¼Œé»„æ²³å…¥æµ·æµã€‚
æ¬²ç©·åƒé‡Œç›®ï¼Œæ›´ä¸Šä¸€å±‚æ¥¼ã€‚</div>
    </div>

    <div class="poem-card">
      <h2 class="poem-title">æ«æ¡¥å¤œæ³Š</h2>
      <p class="poem-author">å¼ ç»§</p>
      <div class="poem-text">
æœˆè½ä¹Œå•¼éœœæ»¡å¤©ï¼Œæ±Ÿæ«æ¸”ç«å¯¹æ„çœ ã€‚
å§‘è‹åŸå¤–å¯’å±±å¯ºï¼Œå¤œåŠé’Ÿå£°åˆ°å®¢èˆ¹ã€‚</div>
    </div>

    <div class="poem-card">
      <h2 class="poem-title">ç›¸æ€</h2>
      <p class="poem-author">ç‹ç»´</p>
      <div class="poem-text">
çº¢è±†ç”Ÿå—å›½ï¼Œæ˜¥æ¥å‘å‡ æã€‚
æ„¿å›å¤šé‡‡æ’·ï¼Œæ­¤ç‰©æœ€ç›¸æ€ã€‚</div>
    </div>

    <div class="poem-card">
      <h2 class="poem-title">ä¹æœˆä¹æ—¥å¿†å±±ä¸œå…„å¼Ÿ</h2>
      <p class="poem-author">ç‹ç»´</p>
      <div class="poem-text">
ç‹¬åœ¨å¼‚ä¹¡ä¸ºå¼‚å®¢ï¼Œæ¯é€¢ä½³èŠ‚å€æ€äº²ã€‚
é¥çŸ¥å…„å¼Ÿç™»é«˜å¤„ï¼Œéæ’èŒ±è¸å°‘ä¸€äººã€‚</div>
    </div>
  </div>

  <div class="actions">
    <button onclick="location.href='index.html'">è¿”å›é€‰æ‹©å…¥å£</button>
    <button onclick="openPoemLetter()">ğŸ“œ æ‰‹æŠ„è¯—ç¬º</button>
    <button onclick="location.href='calligraphy.html'">âœ’ï¸ è¿›å…¥è¯—ç”»å…±åˆ›</button>
  </div>
</main>

<footer>
  æ–‡æ˜å›å“ Â· åœ¨å®‰é™ä¸­ï¼Œä¸æ—§æ—¶å…‰é‡é€¢
</footer>

<script>
// åŠ è½½æœ¬åœ°ä¿å­˜çš„æ•°æ®
let customPoems = JSON.parse(localStorage.getItem("customPoems") || "{}");
let savedName = localStorage.getItem("copyistName") || "";

function openPoemLetter() {
  const defaultPoems = ["é™å¤œæ€", "æ˜¥æ™“", "ç™»é¹³é›€æ¥¼", "æ«æ¡¥å¤œæ³Š", "ç›¸æ€", "ä¹æœˆä¹æ—¥å¿†å±±ä¸œå…„å¼Ÿ"];
  const customTitles = Object.keys(customPoems);
  const allTitles = [...defaultPoems, ...customTitles];

  const options = allTitles.map(title => 
    `<option value="${title}">${title}${customTitles.includes(title) ? "ï¼ˆè‡ªå®šä¹‰ï¼‰" : ""}</option>`
  ).join("");

  const modalHTML = `
    <div id="poemModal" style="position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:1000;">
      <div style="background:#fffef7;border-radius:20px;padding:40px;width:90%;max-width:500px;box-shadow:0 15px 40px rgba(0,0,0,0.3);">
        <h3 style="text-align:center;margin:0 0 30px;color:#5d4037;font-size:26px;">æ‰‹æŠ„è¯—ç¬º</h3>

        <label style="display:block;margin-bottom:10px;color:#6d4c41;font-size:16px;">é€‰æ‹©è¯—æ­Œï¼š</label>
        <select id="poemSelect" style="width:100%;padding:14px;font-size:18px;border-radius:12px;border:1px solid #d7ccc8;margin-bottom:20px;">
          ${options}
          <option value="__add_new__">ï¼‹ æ·»åŠ æ–°è¯—</option>
        </select>

        <label style="display:block;margin-bottom:10px;color:#6d4c41;font-size:16px;">æŠ„ä¹¦äººï¼ˆå¯é€‰ï¼Œä¸‹æ¬¡è‡ªåŠ¨è®°ä½ï¼‰ï¼š</label>
        <input type="text" id="copyistInput" value="${savedName}" placeholder="ä¾‹å¦‚ï¼šå¼ çˆ·çˆ· / å°æ˜" 
               style="width:100%;padding:14px;font-size:18px;border-radius:12px;border:1px solid #d7ccc8;margin-bottom:30px;">

        <div style="text-align:center;">
          <button onclick="generateSelected()" style="padding:12px 36px;font-size:18px;background:#8d6e63;color:white;border:none;border-radius:50px;cursor:pointer;">
            ç”Ÿæˆè¯—ç¬º
          </button>
          <button onclick="document.getElementById('poemModal').remove()" style="margin-left:20px;padding:12px 36px;font-size:18px;background:#a1887f;color:white;border:none;border-radius:50px;cursor:pointer;">
            å–æ¶ˆ
          </button>
        </div>
      </div>
    </div>
  `;

  document.body.insertAdjacentHTML('beforeend', modalHTML);
}

function generateSelected() {
  const select = document.getElementById("poemSelect");
  const selected = select.value;
  const nameInput = document.getElementById("copyistInput").value.trim();

  if (nameInput) {
    localStorage.setItem("copyistName", nameInput);
  }

  document.getElementById("poemModal").remove();

  if (selected === "__add_new__") {
    addNewPoem(nameInput);
  } else {
    window.location.href = `poem-letter.html?poem=${encodeURIComponent(selected)}`;
  }
}

function addNewPoem(preName) {
  const addHTML = `
    <div id="addModal" style="position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:1001;">
      <div style="background:#fffef7;border-radius:20px;padding:40px;width:90%;max-width:500px;box-shadow:0 15px 40px rgba(0,0,0,0.3);">
        <h3 style="text-align:center;margin:0 0 30px;color:#5d4037;font-size:26px;">æ·»åŠ æ–°è¯—</h3>

        <label style="display:block;margin-bottom:10px;color:#6d4c41;">è¯—åï¼š</label>
        <input type="text" id="newTitle" placeholder="ä¾‹å¦‚ï¼šèµ æ±ªä¼¦" style="width:100%;padding:14px;font-size:18px;border-radius:12px;border:1px solid #d7ccc8;margin-bottom:20px;">

        <label style="display:block;margin-bottom:10px;color:#6d4c41;">ä½œè€…ï¼š</label>
        <input type="text" id="newAuthor" value="${preName || ''}" placeholder="ä¾‹å¦‚ï¼šæç™½" style="width:100%;padding:14px;font-size:18px;border-radius:12px;border:1px solid #d7ccc8;margin-bottom:20px;">

        <label style="display:block;margin-bottom:10px;color:#6d4c41;">æ­£æ–‡ï¼ˆæ”¯æŒæ¢è¡Œï¼‰ï¼š</label>
        <textarea id="newText" rows="6" placeholder="æ¡ƒèŠ±æ½­æ°´æ·±åƒå°ºï¼Œ&#10;ä¸åŠæ±ªä¼¦é€æˆ‘æƒ…ã€‚" style="width:100%;padding:14px;font-size:18px;border-radius:12px;border:1px solid #d7ccc8;margin-bottom:30px;resize:vertical;"></textarea>

        <div style="text-align:center;">
          <button onclick="saveNewPoem()" style="padding:12px 36px;font-size:18px;background:#8d6e63;color:white;border:none;border-radius:50px;cursor:pointer;">
            ä¿å­˜å¹¶ç”Ÿæˆ
          </button>
          <button onclick="document.getElementById('addModal').remove()" style="margin-left:20px;padding:12px 36px;font-size:18px;background:#a1887f;color:white;border:none;border-radius:50px;cursor:pointer;">
            å–æ¶ˆ
          </button>
        </div>
      </div>
    </div>
  `;
  document.body.insertAdjacentHTML('beforeend', addHTML);
}

function saveNewPoem() {
  const title = document.getElementById("newTitle").value.trim();
  const author = document.getElementById("newAuthor").value.trim();
  const text = document.getElementById("newText").value.trim();

  if (!title || !text) {
    alert("è¯—åå’Œæ­£æ–‡ä¸èƒ½ä¸ºç©ºå“¦ï½");
    return;
  }

  customPoems[title] = { text: text, author: author || "ä½šå" };
  localStorage.setItem("customPoems", JSON.stringify(customPoems));

  document.getElementById("addModal").remove();

  const url = `poem-letter.html?custom=1&title=${encodeURIComponent(title)}&text=${encodeURIComponent(text.replace(/\n/g, '\\n'))}&author=${encodeURIComponent(author)}`;
  window.location.href = url;
}
</script>

</body>
</html>